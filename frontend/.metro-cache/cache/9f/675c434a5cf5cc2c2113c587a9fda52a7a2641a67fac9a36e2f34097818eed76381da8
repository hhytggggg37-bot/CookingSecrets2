{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":31,"index":180}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _utilsApi = require(_dependencyMap[2], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        const userData = await AsyncStorage.default.getItem('user');\n        if (token && userData) {\n          setUser(JSON.parse(userData));\n        }\n      } catch (error) {\n        console.error('Failed to load user:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password, isStaff = false) => {\n      try {\n        const endpoint = isStaff ? '/auth/staff-login' : '/auth/login';\n        const response = await api.default.post(endpoint, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const signup = async (email, password, name, role) => {\n      try {\n        const response = await api.default.post('/auth/signup', {\n          email,\n          password,\n          name,\n          role\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Signup failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setUser(null);\n    };\n    const refreshUser = async () => {\n      try {\n        const response = await api.default.get('/auth/me');\n        const userData = response.data;\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        login,\n        signup,\n        logout,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":137,"map":[[15,2,29,0,"Object"],[15,8,29,0],[15,9,29,0,"defineProperty"],[15,23,29,0],[15,24,29,0,"exports"],[15,31,29,0],[16,4,29,0,"enumerable"],[16,14,29,0],[17,4,29,0,"get"],[17,7,29,0],[17,18,29,0,"get"],[17,19,29,0],[18,6,29,0],[18,13,29,0,"AuthProvider"],[18,25,29,0],[19,4,29,0],[20,2,29,0],[21,2,108,0,"Object"],[21,8,108,0],[21,9,108,0,"defineProperty"],[21,23,108,0],[21,24,108,0,"exports"],[21,31,108,0],[22,4,108,0,"enumerable"],[22,14,108,0],[23,4,108,0,"get"],[23,7,108,0],[23,18,108,0,"get"],[23,19,108,0],[24,6,108,0],[24,13,108,0,"useAuth"],[24,20,108,0],[25,4,108,0],[26,2,108,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_utilsApi"],[30,15,3,0],[30,18,3,0,"require"],[30,25,3,0],[30,26,3,0,"_dependencyMap"],[30,40,3,0],[31,2,3,0],[31,6,3,0,"api"],[31,9,3,0],[31,12,3,0,"_interopDefault"],[31,27,3,0],[31,28,3,0,"_utilsApi"],[31,37,3,0],[32,2,3,31],[32,6,3,31,"_reactJsxDevRuntime"],[32,25,3,31],[32,28,3,31,"require"],[32,35,3,31],[32,36,3,31,"_dependencyMap"],[32,50,3,31],[33,2,27,0],[33,8,27,6,"AuthContext"],[33,19,27,17],[33,35,27,20],[33,39,27,20,"createContext"],[33,45,27,33],[33,46,27,33,"createContext"],[33,59,27,33],[33,61,27,63,"undefined"],[33,70,27,72],[33,71,27,73],[34,2,29,7],[34,8,29,13,"AuthProvider"],[34,20,29,66],[34,23,29,69,"AuthProvider"],[34,24,29,70],[35,4,29,72,"children"],[36,2,29,81],[36,3,29,82],[36,8,29,87],[37,4,29,87,"_s"],[37,6,29,87],[38,4,30,2],[38,10,30,8],[38,11,30,9,"user"],[38,15,30,13],[38,17,30,15,"setUser"],[38,24,30,22],[38,25,30,23],[38,28,30,26],[38,32,30,26,"useState"],[38,38,30,34],[38,39,30,34,"useState"],[38,47,30,34],[38,49,30,48],[38,53,30,52],[38,54,30,53],[39,4,31,2],[39,10,31,8],[39,11,31,9,"loading"],[39,18,31,16],[39,20,31,18,"setLoading"],[39,30,31,28],[39,31,31,29],[39,34,31,32],[39,38,31,32,"useState"],[39,44,31,40],[39,45,31,40,"useState"],[39,53,31,40],[39,55,31,41],[39,59,31,45],[39,60,31,46],[40,4,33,2],[40,8,33,2,"useEffect"],[40,14,33,11],[40,15,33,11,"useEffect"],[40,24,33,11],[40,26,33,12],[40,32,33,18],[41,6,34,4,"loadUser"],[41,14,34,12],[41,15,34,13],[41,16,34,14],[42,4,35,2],[42,5,35,3],[42,7,35,5],[42,9,35,7],[42,10,35,8],[43,4,37,2],[43,10,37,8,"loadUser"],[43,18,37,16],[43,21,37,19],[43,27,37,19,"loadUser"],[43,28,37,19],[43,33,37,31],[44,6,38,4],[44,10,38,8],[45,8,39,6],[45,14,39,12,"token"],[45,19,39,17],[45,22,39,20],[45,28,39,26,"AsyncStorage"],[45,40,39,38],[45,41,39,38,"default"],[45,48,39,38],[45,49,39,39,"getItem"],[45,56,39,46],[45,57,39,47],[45,64,39,54],[45,65,39,55],[46,8,40,6],[46,14,40,12,"userData"],[46,22,40,20],[46,25,40,23],[46,31,40,29,"AsyncStorage"],[46,43,40,41],[46,44,40,41,"default"],[46,51,40,41],[46,52,40,42,"getItem"],[46,59,40,49],[46,60,40,50],[46,66,40,56],[46,67,40,57],[47,8,42,6],[47,12,42,10,"token"],[47,17,42,15],[47,21,42,19,"userData"],[47,29,42,27],[47,31,42,29],[48,10,43,8,"setUser"],[48,17,43,15],[48,18,43,16,"JSON"],[48,22,43,20],[48,23,43,21,"parse"],[48,28,43,26],[48,29,43,27,"userData"],[48,37,43,35],[48,38,43,36],[48,39,43,37],[49,8,44,6],[50,6,45,4],[50,7,45,5],[50,8,45,6],[50,15,45,13,"error"],[50,20,45,18],[50,22,45,20],[51,8,46,6,"console"],[51,15,46,13],[51,16,46,14,"error"],[51,21,46,19],[51,22,46,20],[51,44,46,42],[51,46,46,44,"error"],[51,51,46,49],[51,52,46,50],[52,6,47,4],[52,7,47,5],[52,16,47,14],[53,8,48,6,"setLoading"],[53,18,48,16],[53,19,48,17],[53,24,48,22],[53,25,48,23],[54,6,49,4],[55,4,50,2],[55,5,50,3],[56,4,52,2],[56,10,52,8,"login"],[56,15,52,13],[56,18,52,16],[56,24,52,16,"login"],[56,25,52,23,"email"],[56,30,52,36],[56,32,52,38,"password"],[56,40,52,54],[56,42,52,56,"isStaff"],[56,49,52,63],[56,52,52,66],[56,57,52,71],[56,62,52,76],[57,6,53,4],[57,10,53,8],[58,8,54,6],[58,14,54,12,"endpoint"],[58,22,54,20],[58,25,54,23,"isStaff"],[58,32,54,30],[58,35,54,33],[58,54,54,52],[58,57,54,55],[58,70,54,68],[59,8,55,6],[59,14,55,12,"response"],[59,22,55,20],[59,25,55,23],[59,31,55,29,"api"],[59,34,55,32],[59,35,55,32,"default"],[59,42,55,32],[59,43,55,33,"post"],[59,47,55,37],[59,48,55,38,"endpoint"],[59,56,55,46],[59,58,55,48],[60,10,55,50,"email"],[60,15,55,55],[61,10,55,57,"password"],[62,8,55,66],[62,9,55,67],[62,10,55,68],[63,8,57,6],[63,14,57,12],[64,10,57,14,"access_token"],[64,22,57,26],[65,10,57,28,"user"],[65,14,57,32],[65,16,57,34,"userData"],[66,8,57,43],[66,9,57,44],[66,12,57,47,"response"],[66,20,57,55],[66,21,57,56,"data"],[66,25,57,60],[67,8,59,6],[67,14,59,12,"AsyncStorage"],[67,26,59,24],[67,27,59,24,"default"],[67,34,59,24],[67,35,59,25,"setItem"],[67,42,59,32],[67,43,59,33],[67,50,59,40],[67,52,59,42,"access_token"],[67,64,59,54],[67,65,59,55],[68,8,60,6],[68,14,60,12,"AsyncStorage"],[68,26,60,24],[68,27,60,24,"default"],[68,34,60,24],[68,35,60,25,"setItem"],[68,42,60,32],[68,43,60,33],[68,49,60,39],[68,51,60,41,"JSON"],[68,55,60,45],[68,56,60,46,"stringify"],[68,65,60,55],[68,66,60,56,"userData"],[68,74,60,64],[68,75,60,65],[68,76,60,66],[69,8,62,6,"setUser"],[69,15,62,13],[69,16,62,14,"userData"],[69,24,62,22],[69,25,62,23],[70,6,63,4],[70,7,63,5],[70,8,63,6],[70,15,63,13,"error"],[70,20,63,23],[70,22,63,25],[71,8,64,6],[71,14,64,12],[71,18,64,16,"Error"],[71,23,64,21],[71,24,64,22,"error"],[71,29,64,27],[71,30,64,28,"response"],[71,38,64,36],[71,40,64,38,"data"],[71,44,64,42],[71,46,64,44,"detail"],[71,52,64,50],[71,56,64,54],[71,70,64,68],[71,71,64,69],[72,6,65,4],[73,4,66,2],[73,5,66,3],[74,4,68,2],[74,10,68,8,"signup"],[74,16,68,14],[74,19,68,17],[74,25,68,17,"signup"],[74,26,68,24,"email"],[74,31,68,37],[74,33,68,39,"password"],[74,41,68,55],[74,43,68,57,"name"],[74,47,68,69],[74,49,68,71,"role"],[74,53,68,83],[74,58,68,88],[75,6,69,4],[75,10,69,8],[76,8,70,6],[76,14,70,12,"response"],[76,22,70,20],[76,25,70,23],[76,31,70,29,"api"],[76,34,70,32],[76,35,70,32,"default"],[76,42,70,32],[76,43,70,33,"post"],[76,47,70,37],[76,48,70,38],[76,62,70,52],[76,64,70,54],[77,10,70,56,"email"],[77,15,70,61],[78,10,70,63,"password"],[78,18,70,71],[79,10,70,73,"name"],[79,14,70,77],[80,10,70,79,"role"],[81,8,70,84],[81,9,70,85],[81,10,70,86],[82,8,72,6],[82,14,72,12],[83,10,72,14,"access_token"],[83,22,72,26],[84,10,72,28,"user"],[84,14,72,32],[84,16,72,34,"userData"],[85,8,72,43],[85,9,72,44],[85,12,72,47,"response"],[85,20,72,55],[85,21,72,56,"data"],[85,25,72,60],[86,8,74,6],[86,14,74,12,"AsyncStorage"],[86,26,74,24],[86,27,74,24,"default"],[86,34,74,24],[86,35,74,25,"setItem"],[86,42,74,32],[86,43,74,33],[86,50,74,40],[86,52,74,42,"access_token"],[86,64,74,54],[86,65,74,55],[87,8,75,6],[87,14,75,12,"AsyncStorage"],[87,26,75,24],[87,27,75,24,"default"],[87,34,75,24],[87,35,75,25,"setItem"],[87,42,75,32],[87,43,75,33],[87,49,75,39],[87,51,75,41,"JSON"],[87,55,75,45],[87,56,75,46,"stringify"],[87,65,75,55],[87,66,75,56,"userData"],[87,74,75,64],[87,75,75,65],[87,76,75,66],[88,8,77,6,"setUser"],[88,15,77,13],[88,16,77,14,"userData"],[88,24,77,22],[88,25,77,23],[89,6,78,4],[89,7,78,5],[89,8,78,6],[89,15,78,13,"error"],[89,20,78,23],[89,22,78,25],[90,8,79,6],[90,14,79,12],[90,18,79,16,"Error"],[90,23,79,21],[90,24,79,22,"error"],[90,29,79,27],[90,30,79,28,"response"],[90,38,79,36],[90,40,79,38,"data"],[90,44,79,42],[90,46,79,44,"detail"],[90,52,79,50],[90,56,79,54],[90,71,79,69],[90,72,79,70],[91,6,80,4],[92,4,81,2],[92,5,81,3],[93,4,83,2],[93,10,83,8,"logout"],[93,16,83,14],[93,19,83,17],[93,25,83,17,"logout"],[93,26,83,17],[93,31,83,29],[94,6,84,4],[94,12,84,10,"AsyncStorage"],[94,24,84,22],[94,25,84,22,"default"],[94,32,84,22],[94,33,84,23,"removeItem"],[94,43,84,33],[94,44,84,34],[94,51,84,41],[94,52,84,42],[95,6,85,4],[95,12,85,10,"AsyncStorage"],[95,24,85,22],[95,25,85,22,"default"],[95,32,85,22],[95,33,85,23,"removeItem"],[95,43,85,33],[95,44,85,34],[95,50,85,40],[95,51,85,41],[96,6,86,4,"setUser"],[96,13,86,11],[96,14,86,12],[96,18,86,16],[96,19,86,17],[97,4,87,2],[97,5,87,3],[98,4,89,2],[98,10,89,8,"refreshUser"],[98,21,89,19],[98,24,89,22],[98,30,89,22,"refreshUser"],[98,31,89,22],[98,36,89,34],[99,6,90,4],[99,10,90,8],[100,8,91,6],[100,14,91,12,"response"],[100,22,91,20],[100,25,91,23],[100,31,91,29,"api"],[100,34,91,32],[100,35,91,32,"default"],[100,42,91,32],[100,43,91,33,"get"],[100,46,91,36],[100,47,91,37],[100,57,91,47],[100,58,91,48],[101,8,92,6],[101,14,92,12,"userData"],[101,22,92,20],[101,25,92,23,"response"],[101,33,92,31],[101,34,92,32,"data"],[101,38,92,36],[102,8,94,6],[102,14,94,12,"AsyncStorage"],[102,26,94,24],[102,27,94,24,"default"],[102,34,94,24],[102,35,94,25,"setItem"],[102,42,94,32],[102,43,94,33],[102,49,94,39],[102,51,94,41,"JSON"],[102,55,94,45],[102,56,94,46,"stringify"],[102,65,94,55],[102,66,94,56,"userData"],[102,74,94,64],[102,75,94,65],[102,76,94,66],[103,8,95,6,"setUser"],[103,15,95,13],[103,16,95,14,"userData"],[103,24,95,22],[103,25,95,23],[104,6,96,4],[104,7,96,5],[104,8,96,6],[104,15,96,13,"error"],[104,20,96,18],[104,22,96,20],[105,8,97,6,"console"],[105,15,97,13],[105,16,97,14,"error"],[105,21,97,19],[105,22,97,20],[105,47,97,45],[105,49,97,47,"error"],[105,54,97,52],[105,55,97,53],[106,6,98,4],[107,4,99,2],[107,5,99,3],[108,4,101,2],[108,24,102,4],[108,28,102,4,"_reactJsxDevRuntime"],[108,47,102,4],[108,48,102,4,"jsxDEV"],[108,54,102,4],[108,56,102,5,"AuthContext"],[108,67,102,16],[108,68,102,17,"Provider"],[108,76,102,25],[109,6,102,26,"value"],[109,11,102,31],[109,13,102,33],[110,8,102,35,"user"],[110,12,102,39],[111,8,102,41,"loading"],[111,15,102,48],[112,8,102,50,"login"],[112,13,102,55],[113,8,102,57,"signup"],[113,14,102,63],[114,8,102,65,"logout"],[114,14,102,71],[115,8,102,73,"refreshUser"],[116,6,102,85],[116,7,102,87],[117,6,102,87,"children"],[117,14,102,87],[117,16,103,7,"children"],[118,4,103,15],[119,6,103,15,"fileName"],[119,14,103,15],[119,16,103,15,"_jsxFileName"],[119,28,103,15],[120,6,103,15,"lineNumber"],[120,16,103,15],[121,6,103,15,"columnNumber"],[121,18,103,15],[122,4,103,15],[122,11,104,26],[122,12,104,27],[123,2,106,0],[123,3,106,1],[124,2,106,2,"_s"],[124,4,106,2],[124,5,29,13,"AuthProvider"],[124,17,29,66],[125,2,29,66,"_c"],[125,4,29,66],[125,7,29,13,"AuthProvider"],[125,19,29,66],[126,2,108,7],[126,8,108,13,"useAuth"],[126,15,108,20],[126,18,108,23,"useAuth"],[126,19,108,23],[126,24,108,29],[127,4,108,29,"_s2"],[127,7,108,29],[128,4,109,2],[128,10,109,8,"context"],[128,17,109,15],[128,20,109,18],[128,24,109,18,"useContext"],[128,30,109,28],[128,31,109,28,"useContext"],[128,41,109,28],[128,43,109,29,"AuthContext"],[128,54,109,40],[128,55,109,41],[129,4,110,2],[129,8,110,6,"context"],[129,15,110,13],[129,20,110,18,"undefined"],[129,29,110,27],[129,31,110,29],[130,6,111,4],[130,12,111,10],[130,16,111,14,"Error"],[130,21,111,19],[130,22,111,20],[130,67,111,65],[130,68,111,66],[131,4,112,2],[132,4,113,2],[132,11,113,9,"context"],[132,18,113,16],[133,2,114,0],[133,3,114,1],[134,2,114,2,"_s2"],[134,5,114,2],[134,6,108,13,"useAuth"],[134,13,108,20],[135,2,108,20],[135,6,108,20,"_c"],[135,8,108,20],[136,2,108,20,"$RefreshReg$"],[136,14,108,20],[136,15,108,20,"_c"],[136,17,108,20],[137,0,108,20],[137,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","login","signup","logout","refreshUser","useAuth"],"mappings":"AAA;qEC4B;YCI;GDE;mBEE;GFa;gBGE;GHc;iBIE;GJa;iBKE;GLI;sBME;GNU;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}